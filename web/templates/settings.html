{{template "_header.html" .}}
{{template "_sidebar.html" .}}

<div id="content-wrapper" class="d-flex flex-column">
    <div id="content">
        {{template "_topbar.html" .}}
        <div class="container-fluid">

            <h1 class="h3 mb-2 text-gray-800">Pengaturan Sistem</h1>
            <p class="mb-4">Halaman ini hanya dapat diakses oleh Super Admin. Ubah konfigurasi sistem dengan hati-hati.</p>

            <form id="settings-form">
                <div class="card shadow mb-4">
                    <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">Konfigurasi Instansi & KOP Surat</h6></div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>KOP Surat Baris 1</label>
                            <input type="text" class="form-control auto-uppercase" id="kop_baris_1" required>
                        </div>
                        <div class="form-group">
                            <label>KOP Surat Baris 2</label>
                            <input type="text" class="form-control auto-uppercase" id="kop_baris_2" required>
                        </div>
                        <div class="form-group">
                            <label>KOP Surat Baris 3</label>
                            <input type="text" class="form-control auto-uppercase" id="kop_baris_3" required>
                        </div>
                        <hr>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Nama Kantor Pelayanan</label>
                                <input type="text" class="form-control auto-titlecase" id="nama_kantor" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label>Tempat Penerbitan Surat</label>
                                <input type="text" class="form-control auto-titlecase" id="tempat_surat" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow mb-4">
                    <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">Konfigurasi Dokumen & Sistem</h6></div>
                    <div class="card-body">
                         <div class="form-row">
                            <div class="form-group col-md-8">
                                <label>Format Nomor Surat</label>
                                <input type="text" class="form-control" id="format_nomor_surat" required >
                                <small class="form-text text-muted">Gunakan <code>%d</code> untuk nomor urut, <code>%s</code> untuk bulan romawi, dan <code>%d</code> untuk tahun.</small>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Nomor Terakhir (Tahun Ini)</label>
                                <input type="number" class="form-control" id="nomor_surat_terakhir" required>
                                <small class="form-text text-muted">Nomor ini akan digunakan jika lebih besar dari nomor terakhir di database.</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Durasi Dokumen Aktif (Hari)</label>
                                <input type="number" class="form-control" id="archive_duration_days" required>
                                <small class="form-text text-muted">Setelah durasi ini, dokumen akan dianggap arsip.</small>
                            </div>
                             <div class="form-group col-md-6">
                                <label>Zona Waktu</label>
                                <select id="zona_waktu" class="form-control" required>
                                    <option value="Asia/Jakarta">WIB (Asia/Jakarta)</option>
                                    <option value="Asia/Makassar">WITA (Asia/Makassar)</option>
                                    <option value="Asia/Jayapura">WIT (Asia/Jayapura)</option>
                                </select>
                            </div>
                        </div>
                         <div class="form-group">
                            <label for="backup_path">Path Folder Backup di Server</label>
                            <input type="text" class="form-control" id="backup_path" placeholder="Default: ./backups">
                            <small class="form-text text-muted">Pastikan aplikasi memiliki izin tulis ke folder ini.</small>
                        </div>
                    </div>
                </div>
                 <div class="d-flex justify-content-end mb-4">
                    <button type="submit" class="btn btn-primary btn-lg">Simpan Semua Pengaturan</button>
                </div>
            </form>

             <div class="row">
                <div class="col-lg-6">
                    <div class="card shadow mb-4">
                        <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary"><i class="fas fa-download mr-2"></i>Cadangkan (Backup) Database</h6></div>
                        <div class="card-body">
                            <p>Unduh salinan lengkap dari database aplikasi saat ini. Simpan file ini di tempat yang aman.</p>
                            <button id="backup-btn" class="btn btn-primary"><span class="icon text-white-50"><i class="fas fa-download"></i></span><span class="text"> Backup Database Sekarang</span></button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card shadow mb-4 border-left-danger">
                        <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-danger"><i class="fas fa-upload mr-2"></i>Pulihkan (Restore) Database</h6></div>
                        <div class="card-body">
                            <p class="font-weight-bold">Aksi ini akan menimpa semua data saat ini. Lakukan dengan hati-hati.</p>
                            <form id="restore-form" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label for="restore-file">Pilih File Backup (<code>.db</code>)</label>
                                    <input type="file" class="form-control-file" id="restore-file" name="restore-file" accept=".db" required>
                                </div>
                                <button type="submit" id="restore-btn" class="btn btn-danger"><span class="icon text-white-50"><i class="fas fa-upload"></i></span><span class="text"> Pulihkan dari File</span></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    {{template "_footer.html" .}}
</div>

{{template "_scripts.html" .}}
{{template "_settingsScript.html" .}}