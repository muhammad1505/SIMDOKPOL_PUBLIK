{{template "_header.html" .}}
{{template "_sidebar.html" .}}

<div id="content-wrapper" class="d-flex flex-column">
    <div id="content">
        {{template "_topbar.html" .}}
        <div class="container-fluid">
            
            <h1 class="h3 mb-4 text-gray-800" id="form-title">Tambah Pengguna Baru</h1>
            <div id="error-alert" class="alert alert-danger" style="display: none;"></div>

            <form id="user-form">
                <div class="card shadow mb-4">
                    <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">Informasi Pengguna</h6></div>
                    <div class="card-body">
                        <div class="form-group"><label for="nama_lengkap">Nama Lengkap</label><input type="text" class="form-control auto-uppercase" id="nama_lengkap" required></div>
                        <div class="form-row">
                             <div class="form-group col-md-6"><label for="nrp">NRP</label><input type="text" class="form-control" id="nrp" required></div>
                             <div class="form-group col-md-6"><label for="pangkat">Pangkat</label><input type="text" class="form-control auto-uppercase" id="pangkat" required></div>
                        </div>
                    </div>
                </div>
                <div class="card shadow mb-4">
                    <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">Akses & Jabatan</h6></div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group col-md-4"><label for="peran">Peran (Hak Akses)</label><select id="peran" class="form-control" required><option selected value="">Pilih...</option><option value="OPERATOR">OPERATOR</option><option value="SUPER_ADMIN">SUPER_ADMIN</option></select></div>
                            <div class="form-group col-md-4"><label for="jabatan">Jabatan</label><select id="jabatan" class="form-control" required><option selected value="">Pilih...</option><option>KAPOLSEK</option><option>KANIT SPKT</option><option>ANGGOTA JAGA REGU</option></select></div>
                             <div class="form-group col-md-4"><label for="regu">Regu</label><select id="regu" class="form-control"><option selected value="">Tidak Ada</option><option>I</option><option>II</option><option>III</option></select></div>
                        </div>
                    </div>
                </div>
                <div class="card shadow mb-4">
                    <div class="card-header py-3"><h6 class="m-0 font-weight-bold text-primary">Keamanan</h6></div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="kata_sandi">Kata Sandi</label>
                                <div class="password-wrapper">
                                    <input type="password" class="form-control" id="kata_sandi">
                                    <i class="fas fa-eye password-peek" id="togglePassword"></i>
                                </div>
                                <small class="form-text text-muted">Minimal 8 karakter.</small>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="kata_sandi_konfirmasi">Konfirmasi Kata Sandi</label>
                                <div class="password-wrapper">
                                    <input type="password" class="form-control" id="kata_sandi_konfirmasi">
                                    <i class="fas fa-eye password-peek" id="togglePasswordConfirm"></i>
                                </div>
                            </div>
                        </div>
                        <small id="passwordHelp" class="form-text text-muted" style="display: none;">Kosongkan kedua kolom di atas jika tidak ingin mengubah kata sandi saat mengedit.</small>
                        </div>
                </div>

                <div class="d-flex justify-content-end mb-4">
                    <a href="/users" class="btn btn-secondary mr-2">Batal</a>
                    <button type="submit" class="btn btn-primary" id="submit-btn">Simpan</button>
                </div>
            </form>

        </div>
    </div>
    {{template "_footer.html" .}}
</div>
{{template "_scripts.html" .}}
{{template "_userFormScript.html" .}}